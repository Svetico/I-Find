<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<Class name="mail.Broker">
<Super>%CSP.REST</Super>
<TimeCreated>64485,69480.317478</TimeCreated>

<Parameter name="HandleCorsRequest">
<Default>1</Default>
</Parameter>

<XData name="UrlMap">
<Data><![CDATA[
<Routes>
<!-- **********Тесты***************** -->
<Route Url="/test" Method="GET" Call="Test"/>
<!-- *********Сообщения************** -->
<Route Url="/messages" Method="GET" Call="GetAllMessages"/>
<!-- *********Работа с сервером************** -->
<Route Url="/server/update/:id" Method="GET" Call="UpdateMails"/>
</Routes>
]]></Data>
</XData>

<UDLText name="T">
<Content><![CDATA[/*---------------------------Тесты-----------------------------------*/
]]></Content>
</UDLText>

<Method name="Test">
<ClassMethod>1</ClassMethod>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	
    w "{'Status':'OK!'}"
    q $$$OK
]]></Implementation>
</Method>

<UDLText name="T">
<Content><![CDATA[/*--------------------------Сообщения-----------------------------------*/
]]></Content>
</UDLText>

<Method name="GetAllMessages">
<ClassMethod>1</ClassMethod>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	
  w ##class(backend.data.Message).GetAllMessages()
  q $$$OK
]]></Implementation>
</Method>

<UDLText name="T">
<Content><![CDATA[/*---------------------------Серверы сообщений-----------------------------------*/
]]></Content>
</UDLText>

<Method name="UpdateMails">
<ClassMethod>1</ClassMethod>
<FormalSpec>id:%String</FormalSpec>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[	do ##class(mail.Utils).GetEmailConnector(id)
]]></Implementation>
</Method>
</Class>
</Export>
